<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>ระบบสะสมแต้มลูกค้า</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; }
    .modal input { margin-bottom: 1rem; }
    .logo { width: 200px; display: block; margin: auto; }
  </style>
</head>
<body>
  <img src="IMG/logo.jpg" class="logo" alt="โลโก้ร้าน">
  <h2 class="text-center my-4">ระบบสะสมแต้มลูกค้า</h2>

  <!-- ฟอร์มเพิ่มข้อมูล -->
  <form id="formAdd" class="row g-3 mb-4">
    <div class="col-md-3">
      <input type="text" id="name" class="form-control" placeholder="ชื่อลูกค้า" required>
    </div>
    <div class="col-md-2">
      <input type="number" id="bottles" class="form-control" placeholder="จำนวนขวด" required>
    </div>
    <div class="col-md-3">
      <input type="number" id="price" class="form-control" placeholder="ยอดสั่งซื้อ (บาท)" required>
    </div>
    <div class="col-md-2">
      <input type="date" id="date" class="form-control" required>
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary w-100">เพิ่มข้อมูล</button>
    </div>
  </form>

  <!-- ช่องค้นหา -->
  <input type="text" id="search" class="form-control mb-3" placeholder="ค้นหาชื่อลูกค้า">

  <!-- เลือกลูกค้าที่มีสิทธิ์แถม-->
  <div class="input-group mb-3">
  <select id="filterCustomer" class="form-select">
    <option value="">เลือกลูกค้าที่มีสิทธิ์แถม</option>
  </select>
  <button class="btn btn-outline-primary" onclick="filterRewardCustomer()">ค้นหา</button>
  <button class="btn btn-outline-secondary" onclick="resetFilter()">รีเซ็ต</button>
</div>

<!-- Check Box ค้นหาลูกค้าที่มีสิทธิ์แถมเท่านั้น-->
 <div class="form-check mb-3">
  <input class="form-check-input" type="checkbox" id="onlyReward" onchange="toggleOnlyReward()">
  <label class="form-check-label" for="onlyReward">
    แสดงเฉพาะลูกค้าที่มีสิทธิ์แถม
  </label>
</div>


  <!-- ตาราง -->
  <div class="table-responsive">
    <table class="table table-bordered text-center align-middle">
      <thead class="table-light">
        <tr>
          <th>ชื่อลูกค้า</th>
          <th>ขวดรวม</th>
          <th>ขวดแถม</th>
          <th>ยอดสั่งซื้อ</th>
          <th>วันที่ล่าสุด</th>
          <th>ใช้สิทธิ์</th>
          <th>แก้ไข</th>
          <th>ลบ</th>
        </tr>
      </thead>
      <tbody id="customerTable"></tbody>
    </table>
      <nav><ul class="pagination justify-content-center mt-3" id="pagination"></ul></nav>
  </div>

  <!-- Modal แก้ไข -->
  <div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content p-3">
        <h5 class="modal-title">แก้ไขข้อมูลลูกค้า</h5>
        <input type="hidden" id="editName">
        <input type="number" id="editBottles" class="form-control" placeholder="จำนวนขวด">
        <input type="number" id="editPrice" class="form-control" placeholder="ยอดสั่งซื้อ">
        <input type="date" id="editDate" class="form-control">
        <button id="saveEdit" class="btn btn-success mt-2">บันทึก</button>
      </div>
    </div>
  </div>

  <!-- Modal ใช้สิทธิ์ -->
  <div class="modal fade" id="redeemModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content p-3">
        <h5 class="modal-title">ใช้สิทธิ์แลกขวดแถม</h5>
        <input type="hidden" id="redeemName">
        <label>จำนวนขวดแถมที่ต้องการใช้:</label>
        <select id="redeemAmount" class="form-select mb-2"></select>
        <button id="confirmRedeem" class="btn btn-warning">ยืนยันการใช้สิทธิ์</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
